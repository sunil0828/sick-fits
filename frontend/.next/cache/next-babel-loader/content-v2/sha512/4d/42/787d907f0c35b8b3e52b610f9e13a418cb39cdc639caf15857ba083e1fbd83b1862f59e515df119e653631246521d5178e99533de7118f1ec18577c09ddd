{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useMutation } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport Router from 'next/router';\nimport useForm from '../lib/useForm';\nimport DisplayError from './ErrorMessage';\nimport { ALL_PRODUCTS_QUERY } from './Products';\nimport Form from './styles/Form';\nconst CREATE_PRODUCT_MUTATION = gql`\n  mutation CREATE_PRODUCT_MUTATION(\n    # Which variables are getting passed in? And What types are they\n    $name: String!\n    $description: String!\n    $category: String!\n    $price: Int!\n    $image: Upload\n  ) {\n    createProduct(\n      data: {\n        name: $name\n        description: $description\n        category: $category\n        price: $price\n        status: \"AVAILABLE\"\n        photo: { create: { image: $image, altText: $name } }\n      }\n    ) {\n      id\n      price\n      description\n      category\n      name\n    }\n  }\n`;\nexport default function CreateProduct() {\n  const {\n    inputs,\n    handleChange,\n    clearForm,\n    resetForm\n  } = useForm({}); //   {\n  //   image: '',\n  //   name: 'Nice Shoes',\n  //   price: 34234,\n  //   category: '',\n  //   description: 'These are the best shoes!',\n  // });\n\n  const [createProduct, {\n    loading,\n    error,\n    data\n  }] = useMutation(CREATE_PRODUCT_MUTATION, {\n    variables: inputs,\n    refetchQueries: [{\n      query: ALL_PRODUCTS_QUERY\n    }]\n  });\n  return /*#__PURE__*/_jsxs(Form, {\n    onSubmit: async e => {\n      e.preventDefault(); // Submit the inputfields to the backend:\n\n      const res = await createProduct();\n      clearForm(); // Go to that product's page!\n\n      Router.push({\n        pathname: `/product/${res.data.createProduct.id}`\n      });\n    },\n    children: [/*#__PURE__*/_jsx(DisplayError, {\n      error: error\n    }), /*#__PURE__*/_jsxs(\"fieldset\", {\n      disabled: loading,\n      \"aria-busy\": loading,\n      children: [/*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"image\",\n        children: [\"Image\", /*#__PURE__*/_jsx(\"input\", {\n          required: true,\n          type: \"file\",\n          id: \"image\",\n          name: \"image\",\n          onChange: handleChange\n        })]\n      }), /*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"name\",\n        children: [\"Name\", /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          placeholder: \"Name\",\n          value: inputs.name,\n          onChange: handleChange\n        })]\n      }), /*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"price\",\n        children: [\"Price\", /*#__PURE__*/_jsx(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          placeholder: \"price\",\n          value: inputs.price,\n          onChange: handleChange\n        })]\n      }), /*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"category\",\n        children: [\"Category\", /*#__PURE__*/_jsxs(\"select\", {\n          name: \"category\",\n          id: \"category\",\n          onSelect: inputs.category,\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsx(\"option\", {\n            children: \"Select a category\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: \"SHIRTS\",\n            children: \"Shirts\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: \"JEANS\",\n            children: \"Jeans\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: \"SHOES\",\n            children: \"Shoes\"\n          }), /*#__PURE__*/_jsx(\"option\", {\n            value: \"HOME APPLIANCE\",\n            children: \"Home Appliance\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"description\",\n        children: [\"Description\", /*#__PURE__*/_jsx(\"textarea\", {\n          id: \"description\",\n          name: \"description\",\n          placeholder: \"Description\",\n          value: inputs.description,\n          onChange: handleChange\n        })]\n      }), /*#__PURE__*/_jsx(\"button\", {\n        type: \"submit\",\n        children: \"+ Add Product\"\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}
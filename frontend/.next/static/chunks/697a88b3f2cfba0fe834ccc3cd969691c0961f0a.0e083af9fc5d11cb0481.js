(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[5],{"2y/O":function(e,n,t){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n={style:"currency",currency:"INR",minimumFractionDigits:2};e%100===0&&(n.minimumFractionDigits=0);var t=Intl.NumberFormat("en-US",n);return t.format(e/100)}t.d(n,"a",(function(){return r}))},ODXe:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}}(e,n)||function(e,n){if(e){if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,"a",(function(){return i}))},VliS:function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"a",(function(){return a}));var r=t("h4VS"),i=t("VX74");function o(){var e=Object(r.a)(["\n  query {\n    authenticatedItem {\n      ... on User {\n        id\n        email\n        name\n        cart {\n          id\n          quantity\n          product {\n            id\n            price\n            name\n            description\n            photo {\n              image {\n                publicUrlTransformed\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}var a=Object(i.gql)(o());function c(){var e=Object(i.useQuery)(a).data;return null===e||void 0===e?void 0:e.authenticatedItem}},YFqc:function(e,n,t){e.exports=t("cTJO")},cTJO:function(e,n,t){"use strict";var r=t("J4zp"),i=t("284h");n.__esModule=!0,n.default=void 0;var o=i(t("q1tI")),a=t("elyg"),c=t("nOHt"),u=t("vNVm"),d={};function l(e,n,t,r){if(e&&(0,a.isLocalURL)(n)){e.prefetch(n,t,r).catch((function(e){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;d[n+"%"+t+(i?"%"+i:"")]=!0}}var s=function(e){var n=!1!==e.prefetch,t=(0,c.useRouter)(),i=t&&t.pathname||"/",s=o.default.useMemo((function(){var n=(0,a.resolveHref)(i,e.href,!0),t=r(n,2),o=t[0],c=t[1];return{href:o,as:e.as?(0,a.resolveHref)(i,e.as):c||o}}),[i,e.href,e.as]),f=s.href,p=s.as,h=e.children,m=e.replace,v=e.shallow,b=e.scroll,g=e.locale;"string"===typeof h&&(h=o.default.createElement("a",null,h));var y=o.Children.only(h),j=y&&"object"===typeof y&&y.ref,O=(0,u.useIntersection)({rootMargin:"200px"}),x=r(O,2),w=x[0],T=x[1],I=o.default.useCallback((function(e){w(e),j&&("function"===typeof j?j(e):"object"===typeof j&&(j.current=e))}),[j,w]);(0,o.useEffect)((function(){var e=T&&n&&(0,a.isLocalURL)(f),r="undefined"!==typeof g?g:t&&t.locale,i=d[f+"%"+p+(r?"%"+r:"")];e&&!i&&l(t,f,p,{locale:r})}),[p,f,T,g,n,t]);var E={ref:I,onClick:function(e){y.props&&"function"===typeof y.props.onClick&&y.props.onClick(e),e.defaultPrevented||function(e,n,t,r,i,o,c,u){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,a.isLocalURL)(t))&&(e.preventDefault(),null==c&&(c=r.indexOf("#")<0),n[i?"replace":"push"](t,r,{shallow:o,locale:u,scroll:c}).then((function(e){e&&c&&document.body.focus()})))}(e,t,f,p,m,v,b,g)},onMouseEnter:function(e){(0,a.isLocalURL)(f)&&(y.props&&"function"===typeof y.props.onMouseEnter&&y.props.onMouseEnter(e),l(t,f,p,{priority:!0}))}};if(e.passHref||"a"===y.type&&!("href"in y.props)){var C="undefined"!==typeof g?g:t&&t.locale,L=(0,a.getDomainLocale)(p,C,t&&t.locales,t&&t.domainLocales);E.href=L||(0,a.addBasePath)((0,a.addLocale)(p,C,t&&t.defaultLocale))}return o.default.cloneElement(y,E)};n.default=s},cUBK:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return f})),t.d(n,"c",(function(){return p}));var r=t("nKUr"),i=t("h4VS"),o=t("VX74"),a=t("lTCR"),c=t.n(a),u=t("vOnD"),d=t("nQYz");function l(){var e=Object(i.a)(["\n  query ALL_PRODUCTS_QUERY {\n    allProducts {\n      id\n      name\n      price\n      category\n      description\n      photo {\n        id\n        image {\n          publicUrlTransformed\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=c()(l()),f=u.b.div.withConfig({displayName:"Products__ProductsListStyles",componentId:"sc-1uv5x8m-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;"]);function p(){var e=Object(o.useQuery)(s),n=e.data,t=e.error;return e.loading?Object(r.jsx)("p",{children:"Loading..."}):t?Object(r.jsxs)("p",{children:["Error: ",t.message]}):Object(r.jsx)("div",{children:Object(r.jsx)(f,{children:n.allProducts.map((function(e){return Object(r.jsx)(d.a,{product:e},e.id)}))})})}},nQYz:function(e,n,t){"use strict";t.d(n,"a",(function(){return T}));var r=t("nKUr"),i=t("YFqc"),o=t.n(i),a=t("vOnD"),c=a.b.div.withConfig({displayName:"ItemStyles",componentId:"sc-16pk14u-0"})(["background:white;border:1px solid var(--offWhite);box-shadow:var(--bs);position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid var(--lightGrey);grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:var(--lightGrey);& > *{background:white;border:0;font-size:1rem;padding:1rem;}}"]),u=a.b.h3.withConfig({displayName:"Title",componentId:"sc-16nq74k-0"})(["margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:var(--red);display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}"]),d=a.b.span.withConfig({displayName:"PriceTag",componentId:"nwbk6t-0"})(["background:var(--red);transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;"]),l=t("2y/O"),s=t("ODXe"),f=t("h4VS"),p=t("VX74"),h=t("lTCR"),m=t.n(h);function v(){var e=Object(f.a)(["\n  mutation DELETE_PRODUCT_MUTATION($id: ID!) {\n    deleteProduct(id: $id) {\n      id\n      name\n    }\n  }\n"]);return v=function(){return e},e}var b=m()(v());function g(e,n){console.log(n),console.log("running the update function after delete"),e.evict(e.identify(n.data.deleteProduct))}function y(e){var n=e.id,t=e.children,i=Object(p.useMutation)(b,{variables:{id:n},update:g}),o=Object(s.a)(i,2),a=o[0],c=o[1],u=c.loading;c.error;return Object(r.jsx)("button",{type:"button",disabled:u,onClick:function(){confirm("Are you sure you want to delete this item?")&&(console.log("DELTEe"),a().catch((function(e){return alert(e.message)})))},children:t})}var j=t("VliS");function O(){var e=Object(f.a)(["\n  mutation ADD_TO_CART_MUTATION($id: ID!) {\n    addToCart(productId: $id) {\n      id\n    }\n  }\n"]);return O=function(){return e},e}var x=m()(O());function w(e){var n=e.id,t=Object(p.useMutation)(x,{variables:{id:n},refetchQueries:[{query:j.a}]}),i=Object(s.a)(t,2),o=i[0],a=i[1].loading;return Object(r.jsxs)("button",{disabled:a,type:"button",onClick:o,children:["Add",a&&"ing"," To Cart \ud83d\uded2"]})}function T(e){var n,t,i=e.product;return Object(r.jsxs)(c,{children:[Object(r.jsx)("img",{src:null===i||void 0===i||null===(n=i.photo)||void 0===n||null===(t=n.image)||void 0===t?void 0:t.publicUrlTransformed,alt:i.name}),Object(r.jsx)(u,{children:Object(r.jsx)(o.a,{href:"/product/".concat(i.id),children:i.name})}),Object(r.jsx)(d,{children:Object(l.a)(i.price)}),Object(r.jsx)("p",{children:i.description}),Object(r.jsxs)("div",{className:"buttonList",children:[Object(r.jsx)(o.a,{href:{pathname:"/update",query:{id:i.id}},children:"Edit \u270f\ufe0f"}),Object(r.jsx)(w,{id:i.id}),Object(r.jsx)(y,{id:i.id,children:"Delete"})]})]})}},vNVm:function(e,n,t){"use strict";var r=t("J4zp"),i=t("TqRt");n.__esModule=!0,n.useIntersection=function(e){var n=e.rootMargin,t=e.disabled||!c,i=(0,o.useRef)(),d=(0,o.useState)(!1),l=r(d,2),s=l[0],f=l[1],p=(0,o.useCallback)((function(e){i.current&&(i.current(),i.current=void 0),t||s||e&&e.tagName&&(i.current=function(e,n,t){var r=function(e){var n=e.rootMargin||"",t=u.get(n);if(t)return t;var r=new Map,i=new IntersectionObserver((function(e){e.forEach((function(e){var n=r.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;n&&t&&n(t)}))}),e);return u.set(n,t={id:n,observer:i,elements:r}),t}(t),i=r.id,o=r.observer,a=r.elements;return a.set(e,n),o.observe(e),function(){a.delete(e),o.unobserve(e),0===a.size&&(o.disconnect(),u.delete(i))}}(e,(function(e){return e&&f(e)}),{rootMargin:n}))}),[t,n,s]);return(0,o.useEffect)((function(){c||s||(0,a.default)((function(){return f(!0)}))}),[s]),[p,s]};var o=t("q1tI"),a=i(t("0G5g")),c="undefined"!==typeof IntersectionObserver;var u=new Map}}]);